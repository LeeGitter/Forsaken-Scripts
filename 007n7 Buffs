local TELEPORT_DISTANCE = 15  -- increased from 10 to 15
local VELOCITY_MAGNITUDE = 50
local PROXIMITY_THRESHOLD = 5
local DODGE_DURATION = 4 -- seconds

-- Hitbox proximity check & teleport loop (every 0.01s)
spawn(function()
    while true do
        if dodgeActive and hrp then
            -- Velocity spoofing for dodge (kept in RenderStepped for smoothness)
            -- We'll keep velocity spoofing in RenderStepped as before, but teleport here

            -- Find nearest hitbox and teleport if close
            local nearest, dist = nil, math.huge
            for _, part in ipairs(hitboxFolder:GetChildren()) do
                if part:IsA("BasePart") then
                    local distance = (part.Position - hrp.Position).Magnitude
                    if distance < dist then
                        dist = distance
                        nearest = part
                    end
                end
            end

            if nearest and dist < PROXIMITY_THRESHOLD then
                local direction = (hrp.Position - nearest.Position).Unit
                hrp.CFrame = CFrame.new(nearest.Position + direction * TELEPORT_DISTANCE)
            end
        end
        wait(0.01)
    end
end)
