local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")

local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()

-- Animation control utility
local function setAnimationsEnabled(enabled)
    -- This example assumes a typical Animate script setup.
    -- If you have a custom Animate script, adjust accordingly.
    local animate = char:FindFirstChild("Animate")
    if animate then
        animate.Disabled = not enabled
    end
end

-- Start script logic
task.delay(0.3, function()
    -- Run first loadstring after 0.3 seconds
    loadstring(game:HttpGet("https://raw.githubusercontent.com/LeeGitter/Forsaken-Scripts/refs/heads/main/007n7%20C00lkidd%20skin", true))()

    -- Disable animations for 0.4 seconds
    setAnimationsEnabled(false)
    task.delay(0.4, function()
        setAnimationsEnabled(true)
    end)
    
    -- Run second loadstring immediately after disabling animations
    loadstring(game:HttpGet("https://raw.githubusercontent.com/LeeGitter/Forsaken-Scripts/refs/heads/main/007n7%20Buffs", true))()
end)

-- Outline toggle setup
local killersFolder = workspace:WaitForChild("Players"):WaitForChild("Killers")

local toggled = false
local highlights = {}

local function addHighlights()
    for _, killer in pairs(killersFolder:GetChildren()) do
        if killer:IsA("Model") then
            local highlight = Instance.new("Highlight")
            highlight.Name = "KillerHighlight"
            highlight.Adornee = killer
            highlight.OutlineColor = Color3.new(1, 0, 0) -- Red outline
            highlight.FillTransparency = 1 -- Only outline visible
            highlight.Parent = killer
            table.insert(highlights, highlight)
        end
    end
end

local function removeHighlights()
    for _, hl in pairs(highlights) do
        if hl and hl.Parent then
            hl:Destroy()
        end
    end
    highlights = {}
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.T then
        toggled = not toggled
        if toggled then
            addHighlights()
        else
            removeHighlights()
        end
    end
end)

-- Skin tone spam + poison detection
local RED = Color3.fromRGB(255, 0, 0)
local PURPLE = Color3.fromHex("#AE499C")

local function applySkinTone(color)
    for _, part in ipairs(char:GetChildren()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.Color = color
        end
    end
end

task.spawn(function()
    while true do
        local poisoned = lp:FindFirstChild("PlayerGui")
            and lp.PlayerGui:FindFirstChild("StatusContainer")
            and lp.PlayerGui.StatusContainer:FindFirstChild("Poisoned")

        if poisoned then
            applySkinTone(PURPLE)
        else
            applySkinTone(RED)
        end

        task.wait(0.1)
    end
end)
