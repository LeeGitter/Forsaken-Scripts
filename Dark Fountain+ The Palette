local fountain = workspace:FindFirstChild("DarkFountain")
if not fountain then return end

-- Override tones
local INDIGO = Color3.fromRGB(75, 0, 130)
local ALMOST_BLACK = Color3.fromRGB(10, 10, 10)

-- Expanded green detection via HSV
local function isGreenish(color)
    local h = Color3.toHSV(color)
    return h >= 0.2 and h <= 0.5
end

-- Aggressive brown detection (wood tones, muddy reds)
local function isBrownish(color)
    local r, g, b = color.R, color.G, color.B
    local warm = r > g and g >= b
    local lowBlue = b < 60
    local muted = r + g + b < 450
    local contrast = math.abs(r - g) < 50 and math.abs(g - b) < 60
    return warm and lowBlue and muted and contrast
end

-- Refined tan detection (excludes yellow)
local function isTan(color)
    local r, g, b = color.R, color.G, color.B
    local light = r > 180 and g > 160 and b > 120
    local warmBias = r > g and g > b
    local notYellow = g < 200 and b < 160 and r - g < 50
    return light and warmBias and notYellow
end

-- Breach effect
local function breachIndigo()
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            local col = obj.Color
            if isGreenish(col) then
                obj.Color = INDIGO
            elseif isBrownish(col) or isTan(col) then
                obj.Color = ALMOST_BLACK
            end
        end
    end
end

-- Touch trigger
fountain.Touched:Connect(function()
    breachIndigo()
end)
